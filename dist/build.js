(()=>{var ut=Object.create;var ne=Object.defineProperty;var ct=Object.getOwnPropertyDescriptor;var dt=Object.getOwnPropertyNames;var ft=Object.getPrototypeOf,mt=Object.prototype.hasOwnProperty;var pt=e=>ne(e,"__esModule",{value:!0});var D=(e,t)=>()=>(e&&(t=e(e=0)),t);var $=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var gt=(e,t,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of dt(t))!mt.call(e,n)&&n!=="default"&&ne(e,n,{get:()=>t[n],enumerable:!(o=ct(t,n))||o.enumerable});return e},L=e=>gt(pt(ne(e!=null?ut(ft(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);function O(e,t,{walkable:o=null,ignore:n=[],limit:s=100}={}){let a=0;function m(l,d,{walkable:c=null,ignore:f=[]}={}){if(a+=1,a>s)return null;if(typeof d=="string"){if(l.hasOwnProperty(d))return l[d]}else if(d(l))return l;if(l){if(Array.isArray(l))for(let g of l){let k=m(g,d,{walkable:c,ignore:f});if(k)return k}else if(typeof l=="object")for(let g of Object.keys(l)){if(c!=null&&!c.includes(g)||f.includes(g))continue;let k=m(l[g],d,{walkable:c,ignore:f});if(k)return k}}}return m(e,t,{walkable:o,ignore:n})}var ve=D(()=>{i()});function re(e,t,o){console[o]("%cCumcord%c",`background-color: ${t}; color: white; border-radius: 4px; padding: 0px 6px 0px 6px; font-weight: bold`,"",...e)}var ht,h,Ce=D(()=>{i();ht={log:(...e)=>{re(e,"#7289da","log")},error:(...e)=>{re(e,"red","error")},warn:(...e)=>{re(e,"red","warn")}},h=ht});var se=$(ie=>{i();"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.default=Object.freeze({GET:"GET",SET:"SET",DELETE:"DELETE",UPDATE:"UPDATE"})});var be=$(F=>{i();"use strict";var yt=F&&F.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(F,"__esModule",{value:!0});var xe=yt(se()),Ee=class{constructor(){this.listeners=Object.values(xe.default).reduce((t,o)=>(t[o]=new Set,t),{}),this.on=function(t,o){if(this.listeners[t].has(o))throw Error(`This listener on ${t} already exists.`);this.listeners[t].add(o)},this.once=function(t,o){let n=(s,a)=>{this.off(s,n),o(s,a)};this.on(t,n)},this.off=function(t,o){this.listeners[t].delete(o)},this.emit=function(t,o){for(let n of this.listeners[t])n(t,o)};for(let t of Object.values(xe.default))this[t.toLowerCase()]=o=>{this.emit(t,o)}}};F.default=Ee});var Me=$(R=>{i();"use strict";var wt=R&&R.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(R,"__esModule",{value:!0});var vt=wt(be());function Ct(e,{nestArrays:t=!0}={}){let o=new vt.default;function n(s,a=e,m=[]){return new Proxy(s,{get(l,d){let c=[...m,d],f=l[d];return f!=null?(o.get({path:c,value:f}),!t&&Array.isArray(f)?f:typeof f=="object"?n(f,a,c):f):n(l[d]={},a,c)},set(l,d,c){return l[d]=c,o.set({path:[...m,d],value:c}),!0},deleteProperty(l,d){return delete l[d]?(o.delete({path:[...m,d]}),!0):!1},has(l,d){return typeof l[d]=="object"&&Object.keys(l[d]).length===0?!1:d in l}})}return Object.assign({store:n(e),ghost:e},o)}R.default=Ct});var j=$(b=>{i();"use strict";var Se=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(b,"__esModule",{value:!0});b.make=b.Events=void 0;var xt=se();Object.defineProperty(b,"Events",{enumerable:!0,get:function(){return Se(xt).default}});var Et=Me();Object.defineProperty(b,"make",{enumerable:!0,get:function(){return Se(Et).default}})});function S(e,t=!1,o=()=>!0){let n=r.useRef(e.ghost),[,s]=r.useReducer(a=>~a,0);r.useEffect(()=>{function a(m,l){o(m,l)&&s()}return e.on(N.Events.UPDATE,a),t||(e.on(N.Events.SET,a),e.on(N.Events.DELETE,a)),()=>{e.off(N.Events.UPDATE,a),t||(e.off(N.Events.SET,a),e.off(N.Events.DELETE,a))}},[])}var N,Pe=D(()=>{i();M();N=L(j())});function _e(e,t){return O(e,t,{walkable:["props","children","child","sibling"]})}var A=D(()=>{i();ve();Ce();Pe()});function bt(){let e=window.webpackJsonp.push([[],{cum:(t,o,n)=>t.exports=n},[["cum"]]]);return e.m.cum=void 0,delete e.m.cum,e.c.cum=void 0,delete e.c.cum,e.c}function ke(e,t){let o=[];for(let n in e)if(e.hasOwnProperty(n)){let s=e[n].exports;s&&(s.default&&s.__esModule&&t(s.default)&&o.push(s.default),t(s)&&o.push(s))}return o}var p,ao,lo,P,uo,co,U,fo,mo,u,w=D(()=>{i();A();p={modules:bt(),find:e=>ke(p.modules,e)[0],findAll:e=>ke(p.modules,e),findByProps:(...e)=>p.find(t=>e.every(o=>t[o]!==void 0)),findByPropsAll:(...e)=>p.findAll(t=>e.every(o=>t[o]!==void 0)),findByPrototypes:(...e)=>p.find(t=>t.prototype&&e.every(o=>t.prototype[o]!==void 0)),findByDisplayName:e=>p.find(t=>t.displayName===e),findByStrings:(...e)=>p.find(t=>{if(typeof t=="function"){if(e.every(o=>t.toString().includes(o)))return!0}else return O(t,o=>{if(o){for(let n of Object.values(o))if(typeof n=="function"&&e.every(s=>n.toString().includes(s)))return!0}})}),findByKeywordAll:(...e)=>p.findAll(t=>e.every(o=>Object.keys(t).some(n=>n.toLowerCase().includes(o.toLowerCase()))==!0))},ao=p.find,lo=p.findAll,P=p.findByProps,uo=p.findByPropsAll,co=p.findByPrototypes,U=p.findByDisplayName,fo=p.findByStrings,mo=p.findByKeywordAll,u=p});var C,r,ae,ho,yo,wo,vo,Co,xo,De,Oe,M=D(()=>{i();w();C={constants:u.findByProps("API_HOST","APP_URL_PREFIX"),channels:u.findByProps("getChannelId","getVoiceChannelId"),Flux:u.findByProps("CachedStore","Store","connectStores"),FluxDispatcher:u.findByProps("_currentDispatchActionType","_subscriptions","_waitQueue"),i18n:u.findByProps("Messages","_requestedLocale"),React:u.findByProps("__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","createElement"),ReactDOM:u.findByProps("__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","hydrate"),Redux:u.findByProps("createStore","__DO_NOT_USE__ActionTypes"),zustand:u.find(e=>{if(typeof e=="function"&&e.toString().includes("[useStore, api] = create() is deprecated and will be removed in v4"))return e})},r=C.React,ae=C.ReactDOM,ho=C.Flux,yo=C.FluxDispatcher,wo=C.Redux,vo=C.constants,Co=C.channels,xo=C.i18n,De=C.zustand,Oe=C});var i=D(()=>{M()});i();i();w();M();i();var Be=L(j());i();i();function Mt(){if(!(!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent))||!indexedDB.databases)return Promise.resolve();let t;return new Promise(o=>{let n=()=>indexedDB.databases().finally(o);t=setInterval(n,100),n()}).finally(()=>clearInterval(t))}var Ne=Mt;function le(e){return new Promise((t,o)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>o(e.error)})}function St(e,t){let o=Ne().then(()=>{let n=indexedDB.open(e);return n.onupgradeneeded=()=>n.result.createObjectStore(t),le(n)});return(n,s)=>o.then(a=>s(a.transaction(t,n).objectStore(t)))}var ue;function Te(){return ue||(ue=St("keyval-store","keyval")),ue}function K(e,t=Te()){return t("readonly",o=>le(o.get(e)))}function G(e,t,o=Te()){return o("readwrite",n=>(n.put(t,e),le(n.transaction)))}var Ie={nests:Be.default,idbKeyval:{get:K,set:G}};i();w();i();w();var je=u.findByProps("v4").v4,v=[];function T(e){let t=document.createElement("style");return t.className="CUMCORD_INJECTED_CSS",t.textContent=e,document.head.appendChild(t),()=>{t.remove()}}function Ae(){for(let e of document.querySelectorAll(".CUMCORD_INJECTED_CSS"))e.remove()}function ce(e,t,o,n){if(!(n=="before"||n=="instead"||n=="after"))throw new Error("Go fuck yourself.");if(typeof t[e]!="function")throw new Error(`${e} is not a function in ${t.constructor.name}`);if(Object.hasOwnProperty.bind(t)("CUMCORD_INJECTIONS")||(t.CUMCORD_INJECTIONS={}),!t.CUMCORD_INJECTIONS.hasOwnProperty(e)){let m=je();t.CUMCORD_INJECTIONS[e]=m}let s=t.CUMCORD_INJECTIONS[e];if(!v[s]){let m=t[e];v[s]={originalFunction:m,functionParent:t,functionName:e,hooks:{before:{},instead:{},after:{}}},t[e]=function(...l){return Pt(s,l,this)}}let a=je();return v[s].hooks[n][a]=o,()=>ze(s,a,n)}function Pt(e,t,o){let n=v[e],s=n.hooks,a=t;for(let c in s.before){let g=s.before[c].call(o,a);Array.isArray(g)&&(a=g)}let m,l=Object.values(s.instead),d=(...c)=>n.originalFunction.call(o,...c);if(l.length>0){let c=f=>l[0].call(o,f,d);for(let f of l.slice(1)){let g=c;c=k=>f.call(o,k,g)}m=c(a)}else m=d(...a);for(let c in s.after){let g=s.after[c].call(o,a,m);typeof g!="undefined"&&(m=g)}return m}function Ue(e,t,o){return ce(e,t,o,"before")}function V(e,t,o){return ce(e,t,o,"instead")}function W(e,t,o){return ce(e,t,o,"after")}function ze(e,t,o){let n=v[e];if(n){let s=n.hooks;if(s[o][t])return delete s[o][t],n.functionParent.CUMCORD_INJECTIONS[n.functionName]=void 0,delete n.functionParent.CUMCORD_INJECTIONS[n.functionName],Object.keys(s).every(m=>Object.values(s[m]).length==0)&&(n.functionParent[n.functionName]=n.originalFunction,delete n.functionParent.CUMCORD_INJECTIONS,v[e]=void 0,delete v[e]),!0}return!1}function Le(){for(let e in v)for(let t of Object.keys(v[e].hooks)){if(!v[e])return;let o=v[e].hooks[t];for(let n in o)ze(e,n,t)}}i();w();A();i();w();i();w();i();i();M();var B=class extends r.Component{constructor(t){super(t);this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?r.createElement("div",{className:"cumcord-error-handler"},r.createElement("h1",{className:"cumcord-error-handler-title"},"Oops, we had a fucky wucky. (Cumcord)"),r.createElement("code",{className:"cumcord-error-handler-code"},`${this.state.error}`)):this.props.children}};var q=P("ModalCloseButton"),Fe=U("Header"),Re=U("Flex"),{openModal:_t}=P("openModal");function Y(e,t){_t(o=>r.createElement(q.ModalRoot,{transitionState:o.transitionState,size:"large",className:"cumcord-settings-modal"},r.createElement(B,null,r.createElement(q.ModalHeader,{separator:!1},r.createElement(Re.Child,{basis:"auto",grow:1,shrink:1,wrap:!1},r.createElement(Fe,{tag:"h2",size:Fe.Sizes.SIZE_20},e)),r.createElement(Re.Child,{basis:"auto",grow:0,shrink:1,wrap:!1},r.createElement(q.ModalCloseButton,{onClick:o.onClose}))),r.createElement(q.ModalContent,null,t))))}A();i();i();var H=L(j());async function de(e){let t=await K(`${e}_CUMCORD_STORE`)||{},o=H.make(t),n=()=>G(`${e}_CUMCORD_STORE`,{...o.ghost});return o.on(H.Events.SET,n),o.on(H.Events.DELETE,n),o}var He=L(j()),kt=eval,Q={cache:"no-store"},Je="https://cors.bridged.cc/",x=He.make({}),y={};function fe(e,t){let o=kt(e),n=o;return typeof o=="function"&&(n=o(t)),n}async function X(e){let t=y.ghost[e];if(!t)throw new Error(`Plugin ${e} not found`);if(x.ghost[e])throw new Error(`Plugin ${e} already loaded`);let o=fe(t.js,{persist:await de(e),id:e});try{o.onLoad&&o.onLoad()}catch{}x.store[e]=o}function me(e){let t=x.ghost[e];if(!t)throw new Error(`Plugin ${e} not found`);if(!x.ghost[e])throw new Error(`Plugin ${e} isn't loaded`);try{t.onUnload()}catch{}delete x.store[e]}function Z(e){let t=y.store[e];if(!y.ghost[e])throw new Error(`Plugin ${e} not found`);t.enabled?(me(e),t.enabled=!1):(X(e),t.enabled=!0)}async function I(e){let t=e.replace(/\/?$/,"/"),o=new URL("plugin.json",t),n=new URL("plugin.js",t),s=y.ghost[t],a=y.store[t],m=s?a.enabled:!0,l=!1,d,c;try{d=await fetch(o,Q)}catch{l=!0,d=await fetch(Je+o,Q)}if(d.status!=200&&!s)throw new Error("Plugin manifest not returning success");try{c=await d.json()}catch{if(!s)throw new Error("Plugin manifest cannot be parsed")}if(s)if(c){if(a.manifest.hash==c.hash){a.manifest!=c&&(a.manifest=c),m&&X(t);return}}else{m&&X(t);return}let f;if(l?f=await await fetch(Je+n,Q):f=await await fetch(n,Q),f.status!=200)throw new Error("Plugin not returning success");let g=await f.text();y.store[t]={manifest:c,js:g,enabled:m},m&&await X(t)}function ee(e){try{me(e)}catch{}delete y.store[e]}async function $e(){y=await de("PLUGIN_CACHE");for(let e of Object.keys(y.ghost))I(e)}function Ke(){for(let e of Object.keys(y.ghost))try{me(e)}catch{}}var Dt=u.findByDisplayName("Card"),Ot=u.findByDisplayName("Header"),Nt=u.findByDisplayName("Text"),pe=u.findByDisplayName("Flex"),Tt=u.findByDisplayName("Markdown"),Bt=u.findByDisplayName("Switch"),Ge=e=>{let t=y.ghost[e.pluginId];if(!t.manifest)return null;S(x);let o=null;return x.ghost[e.pluginId]&&x.ghost[e.pluginId].settings&&(o=r.createElement("svg",{onClick:()=>{Y(t.manifest.name,x.ghost[e.pluginId].settings)},className:"cumcord-card-settings",xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"},r.createElement("g",null,r.createElement("path",{d:"M0,0h24v24H0V0z",fill:"none"}),r.createElement("path",{d:"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"})))),r.createElement(Dt,{className:"cumcord-plugin-card",type:"cardPrimary",outline:!1,editable:!1},r.createElement(pe,{justify:pe.Justify.BETWEEN,align:pe.Align.CENTER},r.createElement("div",{className:"cumcord-card-header"},r.createElement(Ot,{className:"cumcord-card-title"},t.manifest.name),r.createElement(Nt,{className:"cumcord-card-author",tag:"h5"}," ","by ",r.createElement("strong",null,t.manifest.author))),r.createElement("div",{className:"cumcord-card-right"},r.createElement("div",{className:"cumcord-card-buttons"},o,r.createElement("svg",{onClick:()=>{ee(e.pluginId)},className:"cumcord-card-delete",xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"},r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),r.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}))),r.createElement(Bt,{checked:t.enabled,onChange:()=>{try{Z(e.pluginId)}catch{}}}))),r.createElement(Tt,{className:"cumcord-card-description"},t.manifest.description))};var It=r.useState,jt=u.findByDisplayName("FormTitle"),At=u.findByDisplayName("FormSection"),Ut=u.findByDisplayName("Flex"),zt=u.findByDisplayName("TextInput"),ge=u.findByProps("Sizes","Colors","Looks","DropdownSizes"),Lt=u.findByDisplayName("FormDivider"),Ve=()=>{let[e,t]=It("");return S(y),r.createElement(At,null,r.createElement(jt,{tag:"h1"},"Plugins"),r.createElement(Ut,{basis:"auto",grow:1,shrink:1},r.createElement(zt,{className:"cumcord-plugin-import",placeholder:"https://example.com/plugin",type:"text",value:e,onChange:o=>t(o)}),r.createElement(ge,{color:ge.Colors.BRAND,size:ge.Sizes.MEDIUM,onClick:()=>{t(""),I(e)}},"Add plugin")),r.createElement(Lt,{className:"cumcord-plugin-divider"}),Object.keys(y.ghost).map(o=>r.createElement(Ge,{pluginId:o})))};var We={initializeSettings:function(){T(".cumcord-plugin-card{padding:16px;margin-bottom:10px;border-style: none}.cumcord-plugin-import{flex-grow:1;margin-right:20px}.cumcord-plugin-divider{margin-top:20px;margin-bottom:20px}.cumcord-card-header{display:inline-block}.cumcord-card-author,.cumcord-card-title{display:inline}.cumcord-card-right{display:flex}.cumcord-card-buttons{display:flex;margin-right:4px}.cumcord-card-buttons>*{fill:var(--interactive-normal);cursor:pointer;width:20px}.cumcord-card-buttons>*:hover{fill:var(--interactive-hover)}.cumcord-card-description{padding-top:3px;overflow-wrap:break-word}.cumcord-settings-modal{min-height:650px}");let e=u.findByDisplayName("SettingsView");W("getPredicateSections",e.prototype,(t,o)=>{let n=o.findIndex(a=>a.section=="changelog")-1;if(n<0)return o;let s=[{section:"DIVIDER"},{section:"HEADER",label:"Cumcord"},{section:"CUMCORD_PLUGINS",label:"Plugins",element:Ve}];return o.splice(n,0,...s),o})}};A();i();w();i();i();A();var he=L(j()),_=!1,E,qe=he.make({});function Ye(e){if(_){if(E){h.log("Unloading previous plugin version...");try{E.onUnload()}catch(t){h.error("Failed to unload:",t)}}h.log("Loading new plugin version...");try{E=fe(e,{persist:qe,id:"FAKE_PLUGIN_ID"}),E.onLoad&&E.onLoad()}catch(t){h.error("Failed to load:",t)}}}function Qe(){_=!_,_==!1&&(E=void 0,qe=he.make({})),h.log(`Dev mode is now ${_?"on":"off"}.`)}function Xe(){_?E?E.settings?Y("Fake Dev Plugin",E.settings):h.log("No settings for this plugin."):h.error("No plugin loaded!"):h.error("Dev mode is off!")}i();w();var Ft=P("openModal").openModal,ye=P("button","colorRed"),Rt=U("ConfirmModal"),Ht=U("Markdown");async function te({header:e="Are you sure?",confirmText:t="Confirm",cancelText:o="Cancel",content:n="Are you sure you want to do that?",type:s="neutral"}={},a=()=>{}){return new Promise(m=>{var l,d=!1;switch(s.toLowerCase()){case"danger":l=ye.colorRed;break;case"confirm":l=ye.colorGreen;break;default:l=ye.colorBrandNew;break}function c(f){d||(d=!0,a(f),m(f))}Ft(f=>(f.transitionState===3&&c(!1),r.createElement(Rt,{header:e,confirmText:t,cancelText:o,transitionState:f.transitionState,confirmButtonColor:l,onClose:()=>{c(!1)},onCancel:()=>{c(!1),f.onClose()},onConfirm:()=>{c(!0),f.onClose()}},r.createElement(Ht,{editable:!1},n))))})}function we(e,t){var o;try{o=JSON.parse(e)}catch{return}switch(o.action.toLowerCase()){case"get_info":t.send(JSON.stringify({name:"CUMCORD_WEBSOCKET",uuid:o.uuid||Math.random(),status:"OK"}));return;case"install_plugin":if(o.url){if(!o.url.match(/^(http|https):\/\/[^ "]+$/)){t.send(JSON.stringify({name:"CUMCORD_WEBSOCKET",uuid:o.uuid||Math.random(),status:"ERROR",error:"Invalid URL."}));return}DiscordNative.window.focus(),te({header:"Do you want to install this plugin?",content:`Cumcord plugins can run code on your computer and can be potentially dangerous. Only click confirm if you trust the plugin from \`${o.url}\`.`,confirmText:"Install",cancelText:"Cancel",type:"danger"},n=>{if(n){I(o.url),t.send(JSON.stringify({name:"CUMCORD_WEBSOCKET",uuid:o.uuid||Math.random(),status:"OK"}));return}else{t.send(JSON.stringify({name:"CUMCORD_WEBSOCKET",uuid:o.uuid||Math.random(),status:"ERROR",error:"Plugin installation cancelled."}));return}})}else{t.send(JSON.stringify({uuid:o.uuid||Math.random(),status:"ERROR",error:"No URL provided."}));return}return;case"install_plugin_dev":_?o.code?(Ye(o.code),t.send(JSON.stringify({uuid:o.uuid||Math.random(),status:"OK"}))):t.send(JSON.stringify({uuid:o.uuid||Math.random(),status:"ERROR",message:"No code provided."})):t.send(JSON.stringify({uuid:o.uuid||Math.random(),status:"ERROR",message:"Dev mode not enabled."}));return;default:return}}var oe=[];function Ze(){window.DiscordNative&&V("handleConnection",P("handleConnection").__proto__,(e,t)=>{let o=e[0];if(o.upgradeReq().url=="/cumcord")oe.push(o),o.on("message",n=>we(n,o)),o.on("close",()=>{oe.splice(oe.indexOf(o),1)});else return t(...e)})}function et(){if(window.DiscordNative)for(let e of oe)e.close()}i();M();i();w();var Jt=u.findByDisplayName("Card"),$t=u.findByDisplayName("Header"),vn=u.findByDisplayName("Text"),Cn=u.findByDisplayName("Markdown"),tt=e=>r.createElement(Jt,{className:"cumcord-toast",type:"cardPrimary",outline:!1,editable:!1},r.createElement("div",{className:"cumcord-toast-header"},r.createElement($t,{className:"cumcord-toast-title"},e.children)));i();M();i();M();var z=De(e=>({toasts:[]}));function ot(e){let t=z.getState();z.setState({toasts:[...t.toasts,e]})}function nt(e){let t=z.getState(),o=t.toasts.indexOf(e);o>-1&&z.setState({toasts:t.toasts.filter((n,s)=>s!==o)})}var rt=()=>{let e=z(t=>t.toasts);return r.createElement(r.Fragment,null,e)};var J=document.createElement("div");function it(){T(".cumcord-toast-container{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;display:flex;flex-direction:column-reverse;align-items:flex-end;z-index:999999}.cumcord-toast{min-width:120px;min-height:50px;padding:5px;margin-right:10px;margin-bottom:10px;display:flex;justify-content:center;align-items:center;align-content:center;pointer-events:all}.cumcord-toast-title{font-size:30px;top:0;bottom:0;left:0;right:0}"),J.className="cumcord-toast-container",document.getElementById("app-mount").prepend(J),ae.render(r.createElement(rt,null),J)}function st(){ae.unmountComponentAtNode(J),J.remove()}function at(e){let t=r.createElement(tt,null,e.title);ot(t);let o=()=>{nt(t)},n=setTimeout(()=>{o(),clearTimeout(n)},e.duration);return o}function Kt(){return Ke(),et(),Le(),st(),Ae(),window.cumcord=void 0,delete window.cumcord,!0}async function Gt(){h.log("Initializing Cumcord API"),window.cumcord={uninject:Kt,modules:{webpackModules:u,webpack:u,common:Oe,internal:Ie},plugins:{importPlugin:I,removePlugin:ee,togglePlugin:Z},patcher:{before:Ue,after:W,instead:V,injectCSS:T},ui:{toasts:{showToast:at},modals:{showConfirmationModal:te},components:{ErrorBoundary:B}},utils:{logger:h,findInTree:O,findInReactTree:_e,useNest:S},cum:()=>h.log("8==D ~~~~~~")},window.DiscordNative&&(window.cumcord.dev={toggleDevMode:Qe,showSettings:Xe}),T(".cumcord-error-handler{font-family: var(--font-display);color:var(--text-normal);padding:16px}.cumcord-error-handler-title{margin-bottom:7px;font-weight:bold;font-size:24px}.cumcord-error-handler-code{background-color:var(--background-secondary);font-family:var(--font-code);user-select:text}"),it(),await $e(),We.initializeSettings(),Ze(),h.log("Cumcord is injected!")}var lt=Gt;if(window.cumcord)throw new Error("Cumcord is already injected");lt();})();
