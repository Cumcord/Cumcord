(()=>{var St=Object.create;var fe=Object.defineProperty;var kt=Object.getOwnPropertyDescriptor;var Pt=Object.getOwnPropertyNames;var Dt=Object.getPrototypeOf,_t=Object.prototype.hasOwnProperty;var Tt=e=>fe(e,"__esModule",{value:!0});var w=(e,t)=>()=>(e&&(t=e(e=0)),t);var W=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Nt=(e,t,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Pt(t))!_t.call(e,r)&&r!=="default"&&fe(e,r,{get:()=>t[r],enumerable:!(n=kt(t,r))||n.enumerable});return e},L=e=>Nt(Tt(fe(e!=null?St(Dt(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);function P(e,t,{walkable:n=null,ignore:r=[],limit:a=100}={}){let s=0;function u(l,c,{walkable:f=null,ignore:p=[]}={}){if(s+=1,s>a)return null;if(typeof c=="string"){if(l.hasOwnProperty(c))return l[c]}else if(c(l))return l;if(l){if(Array.isArray(l))for(let h of l){let N=u(h,c,{walkable:f,ignore:p});if(N)return N}else if(typeof l=="object")for(let h of Object.keys(l)){if(f!=null&&!f.includes(h)||p.includes(h))continue;let N=u(l[h],c,{walkable:f,ignore:p});if(N)return N}}}return u(e,t,{walkable:n,ignore:r})}var pe=w(()=>{i()});function q(e,t){return P(e,t,{walkable:["props","children","child","sibling"]})}var Oe=w(()=>{i();pe()});function me(e,t,n){console[n]("%cCumcord%c",`background-color: ${t}; color: white; border-radius: 4px; padding: 0px 6px 0px 6px; font-weight: bold`,"",...e)}var Ot,y,Be=w(()=>{i();Ot={log:(...e)=>{me(e,"#7289da","log")},error:(...e)=>{me(e,"red","error")},warn:(...e)=>{me(e,"#debf18","warn")}},y=Ot});var he=W(ge=>{i();"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.default=Object.freeze({GET:"GET",SET:"SET",DELETE:"DELETE",UPDATE:"UPDATE"})});var Ae=W(J=>{i();"use strict";var Bt=J&&J.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(J,"__esModule",{value:!0});var Ie=Bt(he()),je=class{constructor(){this.listeners=Object.values(Ie.default).reduce((t,n)=>(t[n]=new Set,t),{}),this.on=function(t,n){if(this.listeners[t].has(n))throw Error(`This listener on ${t} already exists.`);this.listeners[t].add(n)},this.once=function(t,n){let r=(a,s)=>{this.off(a,r),n(a,s)};this.on(t,r)},this.off=function(t,n){this.listeners[t].delete(n)},this.emit=function(t,n){for(let r of this.listeners[t])r(t,n)};for(let t of Object.values(Ie.default))this[t.toLowerCase()]=n=>{this.emit(t,n)}}};J.default=je});var ze=W(K=>{i();"use strict";var It=K&&K.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(K,"__esModule",{value:!0});var jt=It(Ae());function At(e,{nestArrays:t=!0}={}){let n=new jt.default;function r(a,s=e,u=[]){return new Proxy(a,{get(l,c){let f=[...u,c],p=l[c];return p!=null?(n.get({path:f,value:p}),!t&&Array.isArray(p)?p:typeof p=="object"?r(p,s,f):p):r(l[c]={},s,f)},set(l,c,f){return l[c]=f,n.set({path:[...u,c],value:f}),!0},deleteProperty(l,c){return delete l[c]?(n.delete({path:[...u,c]}),!0):!1},has(l,c){return typeof l[c]=="object"&&Object.keys(l[c]).length===0?!1:c in l}})}return Object.assign({store:r(e),ghost:e},n)}K.default=At});var O=W(D=>{i();"use strict";var Le=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(D,"__esModule",{value:!0});D.make=D.Events=void 0;var zt=he();Object.defineProperty(D,"Events",{enumerable:!0,get:function(){return Le(zt).default}});var Lt=ze();Object.defineProperty(D,"make",{enumerable:!0,get:function(){return Le(Lt).default}})});function M(e,t=!1,n=()=>!0){let r=o.useRef(e.ghost),[,a]=o.useReducer(s=>~s,0);o.useEffect(()=>{function s(u,l){n(u,l)&&a()}return e.on(I.Events.UPDATE,s),t||(e.on(I.Events.SET,s),e.on(I.Events.DELETE,s)),()=>{e.off(I.Events.UPDATE,s),t||(e.off(I.Events.SET,s),e.off(I.Events.DELETE,s))}},[])}var I,Fe=w(()=>{i();B();I=L(O())});function F(e){window.DiscordNative?DiscordNative.clipboard.copy(e):navigator.clipboard.writeText(e).then(()=>{},()=>{let t=document.createElement("textarea");t.style.visibility="hidden",t.style.position="fixed",t.style.top="0",t.style.left="0",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(n){console.error(n)}document.body.removeChild(t)})}var Ue=w(()=>{i()});function U(e){return e.__reactFiber$}var ye=w(()=>{i()});function Z(e){for(let t=U(e);t;t=t.return){let n=t.stateNode;if(n&&n.forceUpdate)return n}}var He=w(()=>{i();ye()});function Q(e){return new Promise(t=>setTimeout(t,e))}var $e=w(()=>{i()});var j=w(()=>{i();pe();Oe();Be();Fe();Ue();ye();He();$e()});function Ft(){let e;return webpackChunkdiscord_app.push([[Math.random().toString(36)],{},t=>{e=t}]),e.c}function Re(e,t,n=!1){let r=[];for(let a in e)if(e.hasOwnProperty(a)){let s=e[a].exports;s&&(s.default&&s.__esModule&&t(s.default)&&r.push(s.default),t(s)&&r.push(s))}return r}var m,Je,Bn,In,H,jn,An,Y,X,zn,Ln,d,x=w(()=>{i();j();m={modules:Ft(),find:e=>Re(m.modules,e)[0],findAll:e=>Re(m.modules,e),getModule:e=>{for(let t in m.modules){let n=m.modules[t]?.exports;if(n===e||n?.default===e)return n}},findByProps:(...e)=>m.find(t=>e.every(n=>t[n]!==void 0)),findByPropsAll:(...e)=>m.findAll(t=>e.every(n=>t[n]!==void 0)),findByPrototypes:(...e)=>m.find(t=>t.prototype&&e.every(n=>t.prototype[n]!==void 0)),findByDisplayName:(e,t=!0)=>t?m.find(n=>n.displayName===e):m.find(n=>n?.default?.displayName===e),findByDisplayNameAll:e=>m.findAll(t=>t.displayName===e),findByStrings:(...e)=>m.find(t=>{if(typeof t=="function"){if(e.every(n=>t.toString().includes(n)))return!0}else return P(t,n=>{if(n){for(let r of Object.values(n))if(typeof r=="function"&&e.every(a=>r.toString().includes(a)))return!0}})}),findByKeywordAll:(...e)=>m.findAll(t=>e.every(n=>Object.keys(t).some(r=>r.toLowerCase().includes(n.toLowerCase()))==!0))},Je=m.find,Bn=m.findAll,In=m.getModule,H=m.findByProps,jn=m.findByPropsAll,An=m.findByPrototypes,Y=m.findByDisplayName,X=m.findByDisplayNameAll,zn=m.findByStrings,Ln=m.findByKeywordAll,d=m});var C,o,we,Hn,$n,Rn,Jn,Kn,Vn,Gn,ve,Ke,B=w(()=>{i();x();C={constants:d.findByProps("API_HOST","APP_URL_PREFIX"),channels:d.findByProps("getChannelId","getVoiceChannelId"),Flux:d.findByProps("CachedStore","Store","connectStores"),FluxDispatcher:d.findByProps("_currentDispatchActionType","_subscriptions","_waitQueue"),i18n:d.findByPropsAll("Messages","_requestedLocale")[1],React:d.findByProps("__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","createElement"),ReactDOM:d.findByProps("__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","hydrate"),Redux:d.findByProps("createStore","__DO_NOT_USE__ActionTypes"),zustand:d.find(e=>{if(typeof e=="function"&&e.toString().includes("[useStore, api] = create() is deprecated and will be removed in v4"))return e}),uuid:{v4:d.findByProps("v4","v1")}},o=C.React,we=C.ReactDOM,Hn=C.Flux,$n=C.FluxDispatcher,Rn=C.Redux,Jn=C.constants,Kn=C.channels,Vn=C.i18n,Gn=C.zustand,ve=C.uuid,Ke=C});var i=w(()=>{B()});i();i();x();B();i();var We=L(O());i();i();function Ut(){if(!(!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent))||!indexedDB.databases)return Promise.resolve();let t;return new Promise(n=>{let r=()=>indexedDB.databases().finally(n);t=setInterval(r,100),r()}).finally(()=>clearInterval(t))}var Ve=Ut;function ee(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function Ht(e,t){let n=Ve().then(()=>{let r=indexedDB.open(e);return r.onupgradeneeded=()=>r.result.createObjectStore(t),ee(r)});return(r,a)=>n.then(s=>a(s.transaction(t,r).objectStore(t)))}var xe;function Ce(){return xe||(xe=Ht("keyval-store","keyval")),xe}function te(e,t=Ce()){return t("readonly",n=>ee(n.get(e)))}function ne(e,t,n=Ce()){return n("readwrite",r=>(r.put(t,e),ee(r.transaction)))}function Ge(e,t=Ce()){return t("readwrite",n=>(n.delete(e),ee(n.transaction)))}var qe={nests:We.default,idbKeyval:{get:te,set:ne}};i();x();i();x();B();var b=[];function A(e){let t=document.createElement("style");return t.className="CUMCORD_INJECTED_CSS",t.textContent=e,document.head.appendChild(t),n=>{typeof n=="undefined"?t.remove():t.textContent=n}}function Ze(){for(let e of document.querySelectorAll(".CUMCORD_INJECTED_CSS"))e.remove()}var _=Symbol("_CUMCORD_INJECTIONS");function be(e,t,n,r){if(!(r=="before"||r=="instead"||r=="after"))throw new Error("Go fuck yourself.");if(typeof t[e]!="function")throw new Error(`${e} is not a function in ${t.constructor.name}`);if(Object.hasOwnProperty.bind(t)(_)||(t[_]={}),!t[_].hasOwnProperty(e)){let u=ve.v4();t[_][e]=u}let a=t[_][e];if(!b[a]){let u=t[e];b[a]={originalFunction:u,functionParent:t,functionName:e,hooks:{before:{},instead:{},after:{}}},t[e]=function(){return $t(a,arguments,this)},Object.assign(t[e],u),t[e].toString=u.toString}let s=ve.v4();return b[a].hooks[r][s]=n,()=>Ye(a,s,r)}function $t(e,t,n){let r=b[e],a=r.hooks,s=t;for(let f in a.before){let h=a.before[f].apply(n,[s]);Array.isArray(h)&&(s=h)}let u,l=Object.values(a.instead);function c(f){return r.originalFunction.apply(n,f)}if(l.length>0){let f=p=>l[0].apply(n,[p,c]);for(let p of l.slice(1)){let h=f;f=N=>p.apply(n,[N,h])}u=f(s)}else u=c(s);for(let f in a.after){let h=a.after[f].apply(n,[s,u]);typeof h!="undefined"&&(u=h)}return u}function Qe(e,t,n){return be(e,t,n,"before")}function oe(e,t,n){return be(e,t,n,"instead")}function re(e,t,n){return be(e,t,n,"after")}function Ye(e,t,n){let r=b[e];if(r){let a=r.hooks;if(a[n][t])return delete a[n][t],r.functionParent[_][r.functionName]=void 0,delete r.functionParent[_][r.functionName],Object.keys(a).every(u=>Object.values(a[u]).length==0)&&(r.functionParent[r.functionName]=r.originalFunction,delete r.functionParent[_],b[e]=void 0,delete b[e]),!0}return!1}function Xe(){for(let e in b)for(let t of Object.keys(b[e].hooks)){if(!b[e])continue;let n=b[e].hooks[t];for(let r in n)Ye(e,r,t)}}i();i();x();i();x();i();i();B();var S=class extends o.Component{constructor(t){super(t);this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?o.createElement("div",{className:"cumcord-error-handler"},o.createElement("h1",{className:"cumcord-error-handler-title"},"Oops, we had a fucky wucky. (Cumcord)"),o.createElement("code",{className:"cumcord-error-handler-code"},`${this.state.error}`)):this.props.children}};var ie=H("ModalCloseButton"),et=X("Header")[1],tt=Y("Flex"),{openModal:Rt}=H("openModal","openModalLazy");function se(e,t){Rt(n=>o.createElement(ie.ModalRoot,{transitionState:n.transitionState,size:"large",className:"cumcord-settings-modal"},o.createElement(S,null,o.createElement(ie.ModalHeader,{separator:!1},o.createElement(tt.Child,{basis:"auto",grow:1,shrink:1,wrap:!1},o.createElement(et,{tag:"h2",size:et.Sizes.SIZE_20},e)),o.createElement(tt.Child,{basis:"auto",grow:0,shrink:1,wrap:!1},o.createElement(ie.ModalCloseButton,{onClick:n.onClose}))),o.createElement(ie.ModalContent,null,t))))}j();i();x();var{openModal:Jt}=H("openModal","openModalLazy"),Me=H("button","colorRed"),Kt=Y("ConfirmModal"),Vt=X("Markdown")[1];async function $({header:e="Are you sure?",confirmText:t="Confirm",cancelText:n="Cancel",content:r="Are you sure you want to do that?",type:a="neutral"}={},s=()=>{}){return new Promise(u=>{var l,c=!1;switch(a.toLowerCase()){case"danger":l=Me.colorRed;break;case"confirm":l=Me.colorGreen;break;default:l=Me.colorBrandNew;break}function f(p){c||(c=!0,s(p),u(p))}Jt(p=>(p.transitionState===3&&f(!1),o.createElement(Kt,{header:e,confirmText:t,cancelText:n,transitionState:p.transitionState,confirmButtonColor:l,onClose:()=>{f(!1)},onCancel:()=>{f(!1),p.onClose()},onConfirm:()=>{f(!0),p.onClose()}},o.createElement(Vt,{editable:!1},r))))})}i();B();i();x();var Gt=d.findByDisplayNameAll("Header")[1],nt=d.findByDisplayName("Text"),ot=e=>o.createElement("div",{onClick:e.onClick,className:"cumcord-toast"+(e.className?` ${e.className}`:"")},e.title?o.createElement(Gt,{className:"cumcord-toast-title"},e.title):null,e.content?o.createElement("div",{className:"cumcord-toast-content"},o.createElement(nt,{size:nt.Sizes.SIZE_16},e.content)):null);i();j();i();var rt=L(O()),k=rt.make({toasts:[]});var it=()=>(M(k),o.createElement(o.Fragment,null,k.ghost.toasts.map(e=>e())));var V=document.createElement("div");function st(){A("@keyframes cumcord-fadeIn{0%{opacity:0}100%{opacity:1}}.cumcord-toast-container{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;display:flex;flex-direction:column-reverse;align-items:flex-end;z-index:999999}.cumcord-toast{background-color:var(--background-floating);padding:18px;margin-right:10px;margin-bottom:10px;display:flex;flex-direction:column;justify-content:center;gap:14px;align-content:center;pointer-events:all;border-radius:5px;box-shadow:var(--elevation-high);animation:cumcord-fadeIn .3s;max-width:400px;overflow-wrap:anywhere}.cumcord-toast-title{font-size:22px;line-height:1}"),V.className="cumcord-toast-container",document.getElementById("app-mount").prepend(V),we.render(o.createElement(it,null),V)}function at(){we.unmountComponentAtNode(V),V.remove()}function R({title:e,content:t,onClick:n=()=>{},className:r,duration:a=3e3}){let s=()=>o.createElement(ot,{onClick:n,className:r,title:e,content:t});k.ghost.toasts.push(s),k.update();function u(){let l=k.ghost.toasts.indexOf(s);l>-1&&(k.ghost.toasts.splice(l,1),k.update())}return a!=1/0&&setTimeout(u,a),u}i();i();var G=L(O());async function Ee(e){let t=await te(`${e}_CUMCORD_STORE`)||{},n=G.make(t),r=()=>ne(`${e}_CUMCORD_STORE`,{...n.ghost});return n.on(G.Events.SET,r),n.on(G.Events.DELETE,r),n}var lt=L(O()),ut={cache:"no-store"},v=lt.make({}),g={};function Se(e,t){let n=Object.assign({},cumcord);n.pluginData=t;let r=new Function("cumcord","return "+e+`
//# sourceURL=${t.id}`)(n),a=r;return typeof r=="function"&&(a=r(t)),a}async function ae(e){let t=g.ghost[e];if(!t)throw new Error(`Plugin ${e} not found`);if(v.ghost[e])throw new Error(`Plugin ${e} already loaded`);let n=Se(t.js,{persist:await Ee(e),id:e});try{n.onLoad&&n.onLoad()}catch{}v.store[e]=n}function ke(e){let t=v.ghost[e];if(!t)throw new Error(`Plugin ${e} not found`);if(!v.ghost[e])throw new Error(`Plugin ${e} isn't loaded`);try{t.onUnload()}catch{}delete v.store[e]}function le(e){let t=g.store[e];if(!g.ghost[e])throw new Error(`Plugin ${e} not found`);t.enabled?(ke(e),t.enabled=!1):(ae(e),t.enabled=!0)}async function z(e){let t=e.replace(/\/?$/,"/"),n=new URL("plugin.json",t),r=new URL("plugin.js",t),a=g.ghost[t],s;a&&(s=g.store[t]);let u=a?a?.enabled:!0,l=a?a?.update:!0;a?.update==null&&a&&(s.update=!0,l=!0);let c;try{let h=await fetch(n,ut);if(c=await h.json(),h.status!=200&&!a)throw new Error("Plugin manifest not returning success")}catch{if(!a)throw new Error("Plugin manifest cannot be parsed")}if(a)if(c&&l){if(s.manifest.hash==c.hash){s.manifest!=c&&(s.manifest=c),u&&ae(t);return}}else{u&&ae(t);return}let f=await await fetch(r,ut);if(f.status!=200)throw new Error("Plugin not returning success");let p=await f.text();g.store[t]={manifest:c,js:p,enabled:u,update:l},u&&await ae(t)}function ue(e){try{ke(e)}catch{}delete g.store[e]}async function ct(){g=await Ee("PLUGIN_CACHE")}async function dt(){for(let e of Object.keys(g.ghost))z(e)}function ft(){for(let e of Object.keys(g.ghost))try{ke(e)}catch{}}var Wt=d.findByDisplayName("Card"),qt=d.findByDisplayNameAll("Header")[1],Zt=d.findByDisplayName("Text"),Pe=d.findByDisplayName("Flex"),Qt=d.findByDisplayNameAll("Markdown")[1],Yt=d.findByDisplayName("Switch"),De=e=>{let t=g.ghost[e.pluginId],n=g;if(!t.manifest)return null;M(v,!1,(a,s)=>{if(s.path[0]==e.pluginId)return!0});let r=null;return v.ghost[e.pluginId]&&v.ghost[e.pluginId].settings&&(r=o.createElement("svg",{onClick:()=>{se(t.manifest.name,v.ghost[e.pluginId].settings)},className:"cumcord-card-settings",xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"},o.createElement("g",null,o.createElement("path",{d:"M0,0h24v24H0V0z",fill:"none"}),o.createElement("path",{d:"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"})))),o.createElement(Wt,{className:"cumcord-plugin-card",type:"cardPrimary",outline:!1,editable:!1},o.createElement(Pe,{justify:Pe.Justify.BETWEEN,align:Pe.Align.CENTER},o.createElement("div",{className:"cumcord-card-header"},o.createElement(qt,{className:"cumcord-card-title"},t.manifest.name),o.createElement(Zt,{className:"cumcord-card-author",tag:"h5"}," ","by ",o.createElement("strong",null,t.manifest.author))),o.createElement("div",{className:"cumcord-card-right"},o.createElement("div",{className:"cumcord-card-buttons"},r,o.createElement("svg",{onClick:()=>{R({content:"Copied plugin URL to clipboard.",duration:1300}),F(e.pluginId)},className:"cumcord-card-copy",xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"none"},o.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),o.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4l6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z"})),t.update?o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",onClick:()=>{n.store[e.pluginId].update=!1}},o.createElement("g",null,o.createElement("rect",{fill:"none",height:"24",width:"24",x:"0"})),o.createElement("g",null,o.createElement("g",null,o.createElement("g",null,o.createElement("path",{d:"M21,10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-0.1c-2.73,2.71-2.73,7.08,0,9.79s7.15,2.71,9.88,0 C18.32,15.65,19,14.08,19,12.1h2c0,1.98-0.88,4.55-2.64,6.29c-3.51,3.48-9.21,3.48-12.72,0c-3.5-3.47-3.53-9.11-0.02-12.58 s9.14-3.47,12.65,0L21,3V10.12z M12.5,8v4.25l3.5,2.08l-0.72,1.21L11,13V8H12.5z"}))))):o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",onClick:()=>{n.store[e.pluginId].update=!0}},o.createElement("g",null,o.createElement("rect",{fill:"none",height:"24",width:"24"})),o.createElement("path",{d:"M8.67,5.84L7.22,4.39C8.6,3.51,10.24,3,12,3c2.74,0,5.19,1.23,6.84,3.16L21,4v6h-6l2.41-2.41C16.12,6.02,14.18,5,12,5 C10.8,5,9.66,5.31,8.67,5.84z M13,7h-2v1.17l2,2V7z M19.78,22.61l-3-3C15.39,20.48,13.76,21,12,21c-4.97,0-9-4.03-9-9 c0-1.76,0.51-3.4,1.39-4.78L1.39,4.22l1.41-1.41l18.38,18.38L19.78,22.61z M15.32,18.15L5.84,8.67C5.31,9.66,5,10.8,5,12 c0,3.86,3.14,7,7,7C13.2,19,14.34,18.69,15.32,18.15z M20.94,13h-2.02c-0.12,0.83-0.39,1.61-0.77,2.32l1.47,1.47 C20.32,15.67,20.79,14.38,20.94,13z"})),o.createElement("svg",{onClick:()=>{$({header:"Do you want to remove this plugin?",content:`All of ${t.manifest.name}'s data will be deleted and cannot be recovered.`,type:"danger",confirmText:"Delete"},a=>{a&&(ue(e.pluginId),Ge(`${e.pluginId}_CUMCORD_STORE`))})},className:"cumcord-card-delete",xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"},o.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),o.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),o.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}))),o.createElement(Yt,{checked:t.enabled,onChange:()=>{try{le(e.pluginId)}catch{}}}))),o.createElement(Qt,{className:"cumcord-card-description"},t.manifest.description))};x();j();var pt=o.useState,Xt=d.findByDisplayName("FormTitle"),en=d.findByDisplayName("FormSection"),tn=d.findByDisplayName("Flex"),nn=d.findByDisplayName("TextInput"),_e=d.findByProps("Sizes","Colors","Looks","DropdownSizes"),on=d.findByDisplayName("FormDivider"),mt=d.findByDisplayName("SearchBar");function gt(e,t){return e.toLowerCase().split(t.toLowerCase()).length-1}var ht=()=>{let[e,t]=pt(""),[n,r]=pt("");function a(){r(""),z(n).then(()=>{}).catch(s=>R({title:"Failed to import plugin",content:s.message,duration:3e3}))}return M(g),o.createElement(S,null,o.createElement(en,null,o.createElement(Xt,{tag:"h1"},"Plugins"),o.createElement(tn,{basis:"auto",grow:1,shrink:1},o.createElement(nn,{className:"cumcord-plugin-import",placeholder:"https://example.com/plugin",type:"text",value:n,onChange:s=>r(s),onKeyDown:s=>{s.key==="Enter"&&a()}}),o.createElement(_e,{color:_e.Colors.BRAND,size:_e.Sizes.MEDIUM,onClick:a},"Add plugin")),o.createElement(mt,{className:"cumcord-plugin-search",query:e,onQueryChange:s=>{t(s)},placeholder:"Search...",size:mt.Sizes.MEDIUM}),o.createElement(on,{className:"cumcord-plugin-divider"}),e?Object.keys(g.ghost).sort((s,u)=>{let l=Object.values(g.ghost[s].manifest).join(""),c=Object.values(g.ghost[u].manifest).join("");return gt(c,e)-gt(l,e)}).map(s=>o.createElement(De,{pluginId:s})):Object.keys(g.ghost).map(s=>o.createElement(De,{pluginId:s}))))};var yt={initializeSettings:function(){A(".cumcord-plugin-card{padding:16px;margin-bottom:10px}.cumcord-plugin-import{flex-grow:1;margin-right:20px}.cumcord-plugin-divider{margin-top:10px;margin-bottom:10px}.cumcord-plugin-search{margin-top:10px}.cumcord-card-header{display:inline-block}.cumcord-card-author,.cumcord-card-title{display:inline}.cumcord-card-right{display:flex}.cumcord-card-buttons{display:flex;margin-right:4px}.cumcord-card-buttons>*{fill:var(--interactive-normal);cursor:pointer;width:20px}.cumcord-card-buttons>*:hover{fill:var(--interactive-hover)}.cumcord-card-description{padding-top:3px;overflow-wrap:break-word}.cumcord-card-copy{width:18px}");let e=d.findByDisplayName("SettingsView");re("getPredicateSections",e.prototype,(t,n)=>{let r=n.findIndex(s=>s.section=="changelog")-1;if(r<0)return n;let a=[{section:"DIVIDER"},{section:"HEADER",label:"Cumcord"},{section:"CUMCORD_PLUGINS",label:"Plugins",element:ht}];return n.splice(r,0,...a),n})}};j();i();x();i();i();j();var Te=L(O()),T=!1,E,wt=Te.make({});async function vt(){if(T){if(E){y.log("Unloading previous plugin version...");try{E.onUnload()}catch(e){y.error("Failed to unload:",e)}}y.log("Loading new plugin version...");try{let e=await(await fetch("http://127.0.0.1:42069")).text();E=Se(e,{persist:wt,id:"FAKE_PLUGIN_ID"}),E.onLoad&&E.onLoad()}catch(e){y.error("Failed to load:",e)}}}function xt(){T=!T,T==!1&&(E.onUnload(),E=void 0,wt=Te.make({})),y.log(`Dev mode is now ${T?"on":"off"}.`)}function Ct(){T?E?E.settings?se("Fake Dev Plugin",E.settings):y.log("No settings for this plugin."):y.error("No plugin loaded!"):y.error("Dev mode is off!")}function Ne(e,t){var n;try{n=JSON.parse(e)}catch{return}switch(n.action.toLowerCase()){case"get_info":t.send(JSON.stringify({name:"CUMCORD_WEBSOCKET",uuid:n.uuid||Math.random(),status:"OK"}));return;case"install_plugin":if(n.url){if(!n.url.match(/^(http|https):\/\/[^ "]+$/)){t.send(JSON.stringify({name:"CUMCORD_WEBSOCKET",uuid:n.uuid||Math.random(),status:"ERROR",error:"Invalid URL."}));return}DiscordNative.window.focus(),$({header:"Do you want to install this plugin?",content:`Cumcord plugins can run code on your computer and can be potentially dangerous. Only click confirm if you trust the plugin from \`${n.url}\`.`,confirmText:"Install",cancelText:"Cancel",type:"danger"},r=>{if(r){z(n.url),t.send(JSON.stringify({name:"CUMCORD_WEBSOCKET",uuid:n.uuid||Math.random(),status:"OK"}));return}else{t.send(JSON.stringify({name:"CUMCORD_WEBSOCKET",uuid:n.uuid||Math.random(),status:"ERROR",error:"Plugin installation cancelled."}));return}})}else{t.send(JSON.stringify({uuid:n.uuid||Math.random(),status:"ERROR",error:"No URL provided."}));return}return;case"update_plugin_dev":T?(vt(),t.send(JSON.stringify({uuid:n.uuid||Math.random(),status:"OK"}))):t.send(JSON.stringify({uuid:n.uuid||Math.random(),status:"ERROR",message:"Dev mode not enabled."}));return;default:return}}var ce=[];function bt(){window.DiscordNative&&oe("handleConnection",Je(e=>e.Z?.__proto__?.handleConnection).Z,(e,t)=>{let n=e[0];if(n.upgradeReq().url=="/cumcord")ce.push(n),n.on("message",r=>Ne(r,n)),n.on("close",()=>{ce.splice(ce.indexOf(n),1)});else return t(...e)})}function Mt(){if(window.DiscordNative)for(let e of ce)e.close()}function rn(){return ft(),Mt(),Xe(),at(),Ze(),window.cumcord=void 0,delete window.cumcord,!0}var de=[];async function sn(){y.log("Initializing Cumcord API"),window.cumcord={uninject:rn,modules:{webpackModules:d,webpack:d,common:Ke,internal:qe},plugins:{importPlugin:z,removePlugin:ue,togglePlugin:le},patcher:{before:Qe,after:re,instead:oe,injectCSS:A},ui:{toasts:{showToast:R},modals:{showConfirmationModal:$},components:{ErrorBoundary:S}},utils:{logger:y,findInTree:P,findInReactTree:q,getReactInstance:U,getOwnerInstance:Z,sleep:Q,useNest:M,copyText:F},cum:()=>Array.isArray(de)?new Promise(e=>{de.push(e)}):"8==D ~~~~~~"},window.DiscordNative&&(window.cumcord.dev={toggleDevMode:xt,showSettings:Ct}),A(".cumcord-error-handler{font-family: var(--font-display);color:var(--text-normal);padding:16px}.cumcord-error-handler-title{margin-bottom:7px;font-weight:bold;font-size:24px}.cumcord-error-handler-code{background-color:var(--background-secondary);font-family:var(--font-code);user-select:text}"),st(),await ct(),yt.initializeSettings(),window.cumcord.plugins.installed=g,window.cumcord.plugins.loaded=v,await dt(),bt(),y.log("Cumcord is injected!");for(let e of de)e("8==D ~~~~~~");de=void 0}var Et=sn;if(window.cumcord)throw new Error("Cumcord is already injected");Et();})();
//# sourceURL=Cumcord