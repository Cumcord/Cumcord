(()=>{var Et=Object.create;var ce=Object.defineProperty;var St=Object.getOwnPropertyDescriptor;var Mt=Object.getOwnPropertyNames;var Dt=Object.getPrototypeOf,kt=Object.prototype.hasOwnProperty;var Pt=e=>ce(e,"__esModule",{value:!0});var w=(e,t)=>()=>(e&&(t=e(e=0)),t);var G=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ot=(e,t,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Mt(t))!kt.call(e,r)&&r!=="default"&&ce(e,r,{get:()=>t[r],enumerable:!(o=St(t,r))||o.enumerable});return e},z=e=>Ot(Pt(ce(e!=null?Et(Dt(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);function k(e,t,{walkable:o=null,ignore:r=[],limit:a=100}={}){let s=0;function u(l,d,{walkable:p=null,ignore:f=[]}={}){if(s+=1,s>a)return null;if(typeof d=="string"){if(l.hasOwnProperty(d))return l[d]}else if(d(l))return l;if(l){if(Array.isArray(l))for(let y of l){let _=u(y,d,{walkable:p,ignore:f});if(_)return _}else if(typeof l=="object")for(let y of Object.keys(l)){if(p!=null&&!p.includes(y)||f.includes(y))continue;let _=u(l[y],d,{walkable:p,ignore:f});if(_)return _}}}return u(e,t,{walkable:o,ignore:r})}var de=w(()=>{i()});function W(e,t){return k(e,t,{walkable:["props","children","child","sibling"]})}var _e=w(()=>{i();de()});function fe(e,t,o){console[o]("%cCumcord%c",`background-color: ${t}; color: white; border-radius: 4px; padding: 0px 6px 0px 6px; font-weight: bold`,"",...e)}var _t,h,Ne=w(()=>{i();_t={log:(...e)=>{fe(e,"#7289da","log")},error:(...e)=>{fe(e,"red","error")},warn:(...e)=>{fe(e,"#debf18","warn")}},h=_t});var me=G(pe=>{i();"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.default=Object.freeze({GET:"GET",SET:"SET",DELETE:"DELETE",UPDATE:"UPDATE"})});var Ie=G($=>{i();"use strict";var Nt=$&&$.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($,"__esModule",{value:!0});var Te=Nt(me()),Be=class{constructor(){this.listeners=Object.values(Te.default).reduce((t,o)=>(t[o]=new Set,t),{}),this.on=function(t,o){if(this.listeners[t].has(o))throw Error(`This listener on ${t} already exists.`);this.listeners[t].add(o)},this.once=function(t,o){let r=(a,s)=>{this.off(a,r),o(a,s)};this.on(t,r)},this.off=function(t,o){this.listeners[t].delete(o)},this.emit=function(t,o){for(let r of this.listeners[t])r(t,o)};for(let t of Object.values(Te.default))this[t.toLowerCase()]=o=>{this.emit(t,o)}}};$.default=Be});var je=G(J=>{i();"use strict";var Tt=J&&J.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(J,"__esModule",{value:!0});var Bt=Tt(Ie());function It(e,{nestArrays:t=!0}={}){let o=new Bt.default;function r(a,s=e,u=[]){return new Proxy(a,{get(l,d){let p=[...u,d],f=l[d];return f!=null?(o.get({path:p,value:f}),!t&&Array.isArray(f)?f:typeof f=="object"?r(f,s,p):f):r(l[d]={},s,p)},set(l,d,p){return l[d]=p,o.set({path:[...u,d],value:p}),!0},deleteProperty(l,d){return delete l[d]?(o.delete({path:[...u,d]}),!0):!1},has(l,d){return typeof l[d]=="object"&&Object.keys(l[d]).length===0?!1:d in l}})}return Object.assign({store:r(e),ghost:e},o)}J.default=It});var N=G(P=>{i();"use strict";var Ae=P&&P.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(P,"__esModule",{value:!0});P.make=P.Events=void 0;var jt=me();Object.defineProperty(P,"Events",{enumerable:!0,get:function(){return Ae(jt).default}});var At=je();Object.defineProperty(P,"make",{enumerable:!0,get:function(){return Ae(At).default}})});function E(e,t=!1,o=()=>!0){let r=n.useRef(e.ghost),[,a]=n.useReducer(s=>~s,0);n.useEffect(()=>{function s(u,l){o(u,l)&&a()}return e.on(B.Events.UPDATE,s),t||(e.on(B.Events.SET,s),e.on(B.Events.DELETE,s)),()=>{e.off(B.Events.UPDATE,s),t||(e.off(B.Events.SET,s),e.off(B.Events.DELETE,s))}},[])}var B,ze=w(()=>{i();T();B=z(N())});function U(e){window.DiscordNative?DiscordNative.clipboard.copy(e):navigator.clipboard.writeText(e).then(()=>{},()=>{let t=document.createElement("textarea");t.style.visibility="hidden",t.style.position="fixed",t.style.top="0",t.style.left="0",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(o){console.error(o)}document.body.removeChild(t)})}var Ue=w(()=>{i()});function L(e){return e.__reactFiber$}var ge=w(()=>{i()});function q(e){for(let t=L(e);t;t=t.return){let o=t.stateNode;if(o&&o.forceUpdate)return o}}var Le=w(()=>{i();ge()});function Z(e){return new Promise(t=>setTimeout(t,e))}var Fe=w(()=>{i()});var I=w(()=>{i();de();_e();Ne();ze();Ue();ge();Le();Fe()});function zt(){let e;return webpackChunkdiscord_app.push([[Math.random().toString(36)],{},t=>{e=t}]),e.c}function Re(e,t,o=!1){let r=[];for(let a in e)if(e.hasOwnProperty(a)){let s=e[a].exports;s&&(s.default&&s.__esModule&&t(s.default)&&r.push(s.default),t(s)&&r.push(s))}return r}var m,He,To,Bo,F,Io,jo,Q,Y,Ao,zo,c,C=w(()=>{i();I();m={modules:zt(),find:e=>Re(m.modules,e)[0],findAll:e=>Re(m.modules,e),getModule:e=>{for(let t in m.modules){let o=m.modules[t]?.exports;if(o===e||o?.default===e)return o}},findByProps:(...e)=>m.find(t=>e.every(o=>t[o]!==void 0)),findByPropsAll:(...e)=>m.findAll(t=>e.every(o=>t[o]!==void 0)),findByPrototypes:(...e)=>m.find(t=>t.prototype&&e.every(o=>t.prototype[o]!==void 0)),findByDisplayName:(e,t=!0)=>t?m.find(o=>o.displayName===e):m.find(o=>o?.default?.displayName===e),findByDisplayNameAll:e=>m.findAll(t=>t.displayName===e),findByStrings:(...e)=>m.find(t=>{if(typeof t=="function"){if(e.every(o=>t.toString().includes(o)))return!0}else return k(t,o=>{if(o){for(let r of Object.values(o))if(typeof r=="function"&&e.every(a=>r.toString().includes(a)))return!0}})}),findByKeywordAll:(...e)=>m.findAll(t=>e.every(o=>Object.keys(t).some(r=>r.toLowerCase().includes(o.toLowerCase()))==!0))},He=m.find,To=m.findAll,Bo=m.getModule,F=m.findByProps,Io=m.findByPropsAll,jo=m.findByPrototypes,Q=m.findByDisplayName,Y=m.findByDisplayNameAll,Ao=m.findByStrings,zo=m.findByKeywordAll,c=m});var x,n,he,Fo,Ro,Ho,$o,Jo,Ko,Vo,ye,$e,T=w(()=>{i();C();x={constants:c.findByProps("API_HOST","APP_URL_PREFIX"),channels:c.findByProps("getChannelId","getVoiceChannelId"),Flux:c.findByProps("CachedStore","Store","connectStores"),FluxDispatcher:c.findByProps("_currentDispatchActionType","_subscriptions","_waitQueue"),i18n:c.findByProps("Messages","_requestedLocale"),React:c.findByProps("__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","createElement"),ReactDOM:c.findByProps("__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","hydrate"),Redux:c.findByProps("createStore","__DO_NOT_USE__ActionTypes"),zustand:c.find(e=>{if(typeof e=="function"&&e.toString().includes("[useStore, api] = create() is deprecated and will be removed in v4"))return e}),uuid:{v4:c.findByProps("v4","v1")}},n=x.React,he=x.ReactDOM,Fo=x.Flux,Ro=x.FluxDispatcher,Ho=x.Redux,$o=x.constants,Jo=x.channels,Ko=x.i18n,Vo=x.zustand,ye=x.uuid,$e=x});var i=w(()=>{T()});i();i();C();T();i();var Ve=z(N());i();i();function Ut(){if(!(!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent))||!indexedDB.databases)return Promise.resolve();let t;return new Promise(o=>{let r=()=>indexedDB.databases().finally(o);t=setInterval(r,100),r()}).finally(()=>clearInterval(t))}var Je=Ut;function X(e){return new Promise((t,o)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>o(e.error)})}function Lt(e,t){let o=Je().then(()=>{let r=indexedDB.open(e);return r.onupgradeneeded=()=>r.result.createObjectStore(t),X(r)});return(r,a)=>o.then(s=>a(s.transaction(t,r).objectStore(t)))}var we;function ve(){return we||(we=Lt("keyval-store","keyval")),we}function ee(e,t=ve()){return t("readonly",o=>X(o.get(e)))}function te(e,t,o=ve()){return o("readwrite",r=>(r.put(t,e),X(r.transaction)))}function Ke(e,t=ve()){return t("readwrite",o=>(o.delete(e),X(o.transaction)))}var Ge={nests:Ve.default,idbKeyval:{get:ee,set:te}};i();C();i();C();T();var b=[];function j(e){let t=document.createElement("style");return t.className="CUMCORD_INJECTED_CSS",t.textContent=e,document.head.appendChild(t),o=>{typeof o=="undefined"?t.remove():t.textContent=o}}function We(){for(let e of document.querySelectorAll(".CUMCORD_INJECTED_CSS"))e.remove()}function Ce(e,t,o,r){if(!(r=="before"||r=="instead"||r=="after"))throw new Error("Go fuck yourself.");if(typeof t[e]!="function")throw new Error(`${e} is not a function in ${t.constructor.name}`);if(Object.hasOwnProperty.bind(t)("CUMCORD_INJECTIONS")||(t.CUMCORD_INJECTIONS={}),!t.CUMCORD_INJECTIONS.hasOwnProperty(e)){let u=ye.v4();t.CUMCORD_INJECTIONS[e]=u}let a=t.CUMCORD_INJECTIONS[e];if(!b[a]){let u=t[e];b[a]={originalFunction:u,functionParent:t,functionName:e,hooks:{before:{},instead:{},after:{}}},t[e]=function(...l){return Ft(a,l,this)},Object.assign(t[e],u),t[e].toString=u.toString}let s=ye.v4();return b[a].hooks[r][s]=o,()=>Ze(a,s,r)}function Ft(e,t,o){let r=b[e],a=r.hooks,s=t;for(let p in a.before){let y=a.before[p].call(o,s);Array.isArray(y)&&(s=y)}let u,l=Object.values(a.instead),d=(...p)=>r.originalFunction.call(o,...p);if(l.length>0){let p=f=>l[0].call(o,f,d);for(let f of l.slice(1)){let y=p;p=_=>f.call(o,_,y)}u=p(s)}else u=d(...s);for(let p in a.after){let y=a.after[p].call(o,s,u);typeof y!="undefined"&&(u=y)}return u}function qe(e,t,o){return Ce(e,t,o,"before")}function oe(e,t,o){return Ce(e,t,o,"instead")}function ne(e,t,o){return Ce(e,t,o,"after")}function Ze(e,t,o){let r=b[e];if(r){let a=r.hooks;if(a[o][t])return delete a[o][t],r.functionParent.CUMCORD_INJECTIONS[r.functionName]=void 0,delete r.functionParent.CUMCORD_INJECTIONS[r.functionName],Object.keys(a).every(u=>Object.values(a[u]).length==0)&&(r.functionParent[r.functionName]=r.originalFunction,delete r.functionParent.CUMCORD_INJECTIONS,b[e]=void 0,delete b[e]),!0}return!1}function Qe(){for(let e in b)for(let t of Object.keys(b[e].hooks)){if(!b[e])return;let o=b[e].hooks[t];for(let r in o)Ze(e,r,t)}}i();i();C();i();C();i();i();T();var M=class extends n.Component{constructor(t){super(t);this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?n.createElement("div",{className:"cumcord-error-handler"},n.createElement("h1",{className:"cumcord-error-handler-title"},"Oops, we had a fucky wucky. (Cumcord)"),n.createElement("code",{className:"cumcord-error-handler-code"},`${this.state.error}`)):this.props.children}};var re=F("ModalCloseButton"),Ye=Y("Header")[1],Xe=Q("Flex"),{openModal:Rt}=F("openModal","openModalLazy");function ie(e,t){Rt(o=>n.createElement(re.ModalRoot,{transitionState:o.transitionState,size:"large",className:"cumcord-settings-modal"},n.createElement(M,null,n.createElement(re.ModalHeader,{separator:!1},n.createElement(Xe.Child,{basis:"auto",grow:1,shrink:1,wrap:!1},n.createElement(Ye,{tag:"h2",size:Ye.Sizes.SIZE_20},e)),n.createElement(Xe.Child,{basis:"auto",grow:0,shrink:1,wrap:!1},n.createElement(re.ModalCloseButton,{onClick:o.onClose}))),n.createElement(re.ModalContent,null,t))))}I();i();C();var{openModal:Ht}=F("openModal","openModalLazy"),xe=F("button","colorRed"),$t=Q("ConfirmModal"),Jt=Y("Markdown")[1];async function R({header:e="Are you sure?",confirmText:t="Confirm",cancelText:o="Cancel",content:r="Are you sure you want to do that?",type:a="neutral"}={},s=()=>{}){return new Promise(u=>{var l,d=!1;switch(a.toLowerCase()){case"danger":l=xe.colorRed;break;case"confirm":l=xe.colorGreen;break;default:l=xe.colorBrandNew;break}function p(f){d||(d=!0,s(f),u(f))}Ht(f=>(f.transitionState===3&&p(!1),n.createElement($t,{header:e,confirmText:t,cancelText:o,transitionState:f.transitionState,confirmButtonColor:l,onClose:()=>{p(!1)},onCancel:()=>{p(!1),f.onClose()},onConfirm:()=>{p(!0),f.onClose()}},n.createElement(Jt,{editable:!1},r))))})}i();T();i();C();var Kt=c.findByDisplayNameAll("Header")[1],et=c.findByDisplayName("Text"),tt=e=>n.createElement("div",{onClick:e.onClick,className:"cumcord-toast"+(e.className?` ${e.className}`:"")},e.title?n.createElement(Kt,{className:"cumcord-toast-title"},e.title):null,e.content?n.createElement("div",{className:"cumcord-toast-content"},n.createElement(et,{size:et.Sizes.SIZE_16},e.content)):null);i();I();i();var ot=z(N()),D=ot.make({toasts:[]});var nt=()=>(E(D),n.createElement(n.Fragment,null,D.ghost.toasts.map(e=>e())));var K=document.createElement("div");function rt(){j("@keyframes cumcord-fadeIn{0%{opacity:0}100%{opacity:1}}.cumcord-toast-container{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;display:flex;flex-direction:column-reverse;align-items:flex-end;z-index:999999}.cumcord-toast{background-color:var(--background-floating);padding:18px;margin-right:10px;margin-bottom:10px;display:flex;flex-direction:column;justify-content:center;gap:14px;align-content:center;pointer-events:all;border-radius:5px;box-shadow:var(--elevation-high);animation:cumcord-fadeIn .3s;max-width:400px;overflow-wrap:anywhere}.cumcord-toast-title{font-size:22px;line-height:1}"),K.className="cumcord-toast-container",document.getElementById("app-mount").prepend(K),he.render(n.createElement(nt,null),K)}function it(){he.unmountComponentAtNode(K),K.remove()}function H({title:e,content:t,onClick:o=()=>{},className:r,duration:a=3e3}){let s=()=>n.createElement(tt,{onClick:o,className:r,title:e,content:t});D.ghost.toasts.push(s),D.update();function u(){let l=D.ghost.toasts.indexOf(s);l>-1&&(D.ghost.toasts.splice(l,1),D.update())}return a!=1/0&&setTimeout(u,a),u}i();i();var V=z(N());async function be(e){let t=await ee(`${e}_CUMCORD_STORE`)||{},o=V.make(t),r=()=>te(`${e}_CUMCORD_STORE`,{...o.ghost});return o.on(V.Events.SET,r),o.on(V.Events.DELETE,r),o}var st=z(N()),Vt=eval,at={cache:"no-store"},v=st.make({}),g={};function Ee(e,t){let o=Vt(e+`
//# sourceURL=${t.id}`),r=o;return typeof o=="function"&&(r=o(t)),r}async function se(e){let t=g.ghost[e];if(!t)throw new Error(`Plugin ${e} not found`);if(v.ghost[e])throw new Error(`Plugin ${e} already loaded`);let o=Ee(t.js,{persist:await be(e),id:e});try{o.onLoad&&o.onLoad()}catch{}v.store[e]=o}function Se(e){let t=v.ghost[e];if(!t)throw new Error(`Plugin ${e} not found`);if(!v.ghost[e])throw new Error(`Plugin ${e} isn't loaded`);try{t.onUnload()}catch{}delete v.store[e]}function ae(e){let t=g.store[e];if(!g.ghost[e])throw new Error(`Plugin ${e} not found`);t.enabled?(Se(e),t.enabled=!1):(se(e),t.enabled=!0)}async function A(e){let t=e.replace(/\/?$/,"/"),o=new URL("plugin.json",t),r=new URL("plugin.js",t),a=g.ghost[t],s;a&&(s=g.store[t]);let u=a?s.enabled:!0,l;try{let f=await fetch(o,at);if(l=await f.json(),f.status!=200&&!a)throw new Error("Plugin manifest not returning success")}catch{if(!a)throw new Error("Plugin manifest cannot be parsed")}if(a)if(l){if(s.manifest.hash==l.hash){s.manifest!=l&&(s.manifest=l),u&&se(t);return}}else{u&&se(t);return}let d=await await fetch(r,at);if(d.status!=200)throw new Error("Plugin not returning success");let p=await d.text();g.store[t]={manifest:l,js:p,enabled:u},u&&await se(t)}function le(e){try{Se(e)}catch{}delete g.store[e]}async function lt(){g=await be("PLUGIN_CACHE")}async function ut(){for(let e of Object.keys(g.ghost))A(e)}function ct(){for(let e of Object.keys(g.ghost))try{Se(e)}catch{}}var Gt=c.findByDisplayName("Card"),Wt=c.findByDisplayNameAll("Header")[1],qt=c.findByDisplayName("Text"),Me=c.findByDisplayName("Flex"),Zt=c.findByDisplayNameAll("Markdown")[1],Qt=c.findByDisplayName("Switch"),De=e=>{let t=g.ghost[e.pluginId];if(!t.manifest)return null;E(v,!1,(r,a)=>{if(a.path[0]==e.pluginId)return!0});let o=null;return v.ghost[e.pluginId]&&v.ghost[e.pluginId].settings&&(o=n.createElement("svg",{onClick:()=>{ie(t.manifest.name,v.ghost[e.pluginId].settings)},className:"cumcord-card-settings",xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"},n.createElement("g",null,n.createElement("path",{d:"M0,0h24v24H0V0z",fill:"none"}),n.createElement("path",{d:"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"})))),n.createElement(Gt,{className:"cumcord-plugin-card",type:"cardPrimary",outline:!1,editable:!1},n.createElement(Me,{justify:Me.Justify.BETWEEN,align:Me.Align.CENTER},n.createElement("div",{className:"cumcord-card-header"},n.createElement(Wt,{className:"cumcord-card-title"},t.manifest.name),n.createElement(qt,{className:"cumcord-card-author",tag:"h5"}," ","by ",n.createElement("strong",null,t.manifest.author))),n.createElement("div",{className:"cumcord-card-right"},n.createElement("div",{className:"cumcord-card-buttons"},o,n.createElement("svg",{onClick:()=>{H({content:"Copied plugin URL to clipboard.",duration:1300}),U(e.pluginId)},className:"cumcord-card-copy",xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"none"},n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4l6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z"})),n.createElement("svg",{onClick:()=>{R({header:"Do you want to remove this plugin?",content:`All of ${t.manifest.name}'s data will be deleted and cannot be recovered.`,type:"danger",confirmText:"Delete"},r=>{r&&(le(e.pluginId),Ke(`${e.pluginId}_CUMCORD_STORE`))})},className:"cumcord-card-delete",xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"},n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),n.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}))),n.createElement(Qt,{checked:t.enabled,onChange:()=>{try{ae(e.pluginId)}catch{}}}))),n.createElement(Zt,{className:"cumcord-card-description"},t.manifest.description))};C();I();var dt=n.useState,Yt=c.findByDisplayName("FormTitle"),Xt=c.findByDisplayName("FormSection"),eo=c.findByDisplayName("Flex"),to=c.findByDisplayName("TextInput"),ke=c.findByProps("Sizes","Colors","Looks","DropdownSizes"),oo=c.findByDisplayName("FormDivider"),ft=c.findByDisplayName("SearchBar");function pt(e,t){return e.toLowerCase().split(t.toLowerCase()).length-1}var mt=()=>{let[e,t]=dt(""),[o,r]=dt("");function a(){r(""),A(o).then(()=>{}).catch(s=>H({title:"Failed to import plugin",content:s.message,duration:3e3}))}return E(g),n.createElement(M,null,n.createElement(Xt,null,n.createElement(Yt,{tag:"h1"},"Plugins"),n.createElement(eo,{basis:"auto",grow:1,shrink:1},n.createElement(to,{className:"cumcord-plugin-import",placeholder:"https://example.com/plugin",type:"text",value:o,onChange:s=>r(s),onKeyDown:s=>{s.key==="Enter"&&a()}}),n.createElement(ke,{color:ke.Colors.BRAND,size:ke.Sizes.MEDIUM,onClick:a},"Add plugin")),n.createElement(ft,{className:"cumcord-plugin-search",query:e,onQueryChange:s=>{t(s)},placeholder:"Search...",size:ft.Sizes.MEDIUM}),n.createElement(oo,{className:"cumcord-plugin-divider"}),e?Object.keys(g.ghost).sort((s,u)=>{let l=Object.values(g.ghost[s].manifest).join(""),d=Object.values(g.ghost[u].manifest).join("");return pt(d,e)-pt(l,e)}).map(s=>n.createElement(De,{pluginId:s})):Object.keys(g.ghost).map(s=>n.createElement(De,{pluginId:s}))))};var gt={initializeSettings:function(){j(".cumcord-plugin-card{padding:16px;margin-bottom:10px;border-style: none}.cumcord-plugin-import{flex-grow:1;margin-right:20px}.cumcord-plugin-divider{margin-top:10px;margin-bottom:10px}.cumcord-plugin-search{margin-top:10px}.cumcord-card-header{display:inline-block}.cumcord-card-author,.cumcord-card-title{display:inline}.cumcord-card-right{display:flex}.cumcord-card-buttons{display:flex;margin-right:4px}.cumcord-card-buttons>*{fill:var(--interactive-normal);cursor:pointer;width:20px}.cumcord-card-buttons>*:hover{fill:var(--interactive-hover)}.cumcord-card-description{padding-top:3px;overflow-wrap:break-word}.cumcord-card-copy{width:18px}");let e=c.findByDisplayName("SettingsView");ne("getPredicateSections",e.prototype,(t,o)=>{let r=o.findIndex(s=>s.section=="changelog")-1;if(r<0)return o;let a=[{section:"DIVIDER"},{section:"HEADER",label:"Cumcord"},{section:"CUMCORD_PLUGINS",label:"Plugins",element:mt}];return o.splice(r,0,...a),o})}};I();i();C();i();i();I();var Pe=z(N()),O=!1,S,ht=Pe.make({});async function yt(){if(O){if(S){h.log("Unloading previous plugin version...");try{S.onUnload()}catch(e){h.error("Failed to unload:",e)}}h.log("Loading new plugin version...");try{let e=await(await fetch("http://127.0.0.1:42069")).text();S=Ee(e,{persist:ht,id:"FAKE_PLUGIN_ID"}),S.onLoad&&S.onLoad()}catch(e){h.error("Failed to load:",e)}}}function wt(){O=!O,O==!1&&(S.onUnload(),S=void 0,ht=Pe.make({})),h.log(`Dev mode is now ${O?"on":"off"}.`)}function vt(){O?S?S.settings?ie("Fake Dev Plugin",S.settings):h.log("No settings for this plugin."):h.error("No plugin loaded!"):h.error("Dev mode is off!")}function Oe(e,t){var o;try{o=JSON.parse(e)}catch{return}switch(o.action.toLowerCase()){case"get_info":t.send(JSON.stringify({name:"CUMCORD_WEBSOCKET",uuid:o.uuid||Math.random(),status:"OK"}));return;case"install_plugin":if(o.url){if(!o.url.match(/^(http|https):\/\/[^ "]+$/)){t.send(JSON.stringify({name:"CUMCORD_WEBSOCKET",uuid:o.uuid||Math.random(),status:"ERROR",error:"Invalid URL."}));return}DiscordNative.window.focus(),R({header:"Do you want to install this plugin?",content:`Cumcord plugins can run code on your computer and can be potentially dangerous. Only click confirm if you trust the plugin from \`${o.url}\`.`,confirmText:"Install",cancelText:"Cancel",type:"danger"},r=>{if(r){A(o.url),t.send(JSON.stringify({name:"CUMCORD_WEBSOCKET",uuid:o.uuid||Math.random(),status:"OK"}));return}else{t.send(JSON.stringify({name:"CUMCORD_WEBSOCKET",uuid:o.uuid||Math.random(),status:"ERROR",error:"Plugin installation cancelled."}));return}})}else{t.send(JSON.stringify({uuid:o.uuid||Math.random(),status:"ERROR",error:"No URL provided."}));return}return;case"update_plugin_dev":O?(yt(),t.send(JSON.stringify({uuid:o.uuid||Math.random(),status:"OK"}))):t.send(JSON.stringify({uuid:o.uuid||Math.random(),status:"ERROR",message:"Dev mode not enabled."}));return;default:return}}var ue=[];function Ct(){window.DiscordNative&&oe("handleConnection",He(e=>e.Z?.__proto__?.handleConnection).Z,(e,t)=>{let o=e[0];if(o.upgradeReq().url=="/cumcord")ue.push(o),o.on("message",r=>Oe(r,o)),o.on("close",()=>{ue.splice(ue.indexOf(o),1)});else return t(...e)})}function xt(){if(window.DiscordNative)for(let e of ue)e.close()}function no(){return ct(),xt(),Qe(),it(),We(),window.cumcord=void 0,delete window.cumcord,!0}async function ro(){h.log("Initializing Cumcord API"),window.cumcord={uninject:no,modules:{webpackModules:c,webpack:c,common:$e,internal:Ge},plugins:{importPlugin:A,removePlugin:le,togglePlugin:ae},patcher:{before:qe,after:ne,instead:oe,injectCSS:j},ui:{toasts:{showToast:H},modals:{showConfirmationModal:R},components:{ErrorBoundary:M}},utils:{logger:h,findInTree:k,findInReactTree:W,getReactInstance:L,getOwnerInstance:q,sleep:Z,useNest:E,copyText:U},cum:()=>h.log("8==D ~~~~~~")},window.DiscordNative&&(window.cumcord.dev={toggleDevMode:wt,showSettings:vt}),j(".cumcord-error-handler{font-family: var(--font-display);color:var(--text-normal);padding:16px}.cumcord-error-handler-title{margin-bottom:7px;font-weight:bold;font-size:24px}.cumcord-error-handler-code{background-color:var(--background-secondary);font-family:var(--font-code);user-select:text}"),rt(),await lt(),gt.initializeSettings(),window.cumcord.plugins.installed=g,window.cumcord.plugins.loaded=v,await ut(),Ct(),h.log("Cumcord is injected!")}var bt=ro;if(window.cumcord)throw new Error("Cumcord is already injected");bt();})();
//# sourceURL=Cumcord