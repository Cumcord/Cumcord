(function(){"use strict";const n=n=>{console.log(`%cCumcord%c ${n}`,"background-color: #7289da; color: white; border-radius: 4px; padding: 0px 6px 0px 6px; font-weight: bold","")};function e(n,e){let t=[];for(const o in n)if(n.hasOwnProperty(o)){const c=n[o].exports;c&&(c.default&&c.__esModule&&e(c.default)&&t.push(c.default),e(c)&&t.push(c))}return t}const t={modules:function(){const n=window.webpackJsonp.push([[],{__extra_id__:(n,e,t)=>n.exports=t},[["__extra_id__"]]]);return n.m.__extra_id__=void 0,delete n.m.__extra_id__,n.c.__extra_id__=void 0,delete n.c.__extra_id__,n.c}(),find:n=>e(t.modules,n)[0],findAll:n=>e(t.modules,n),findByProps:(...n)=>t.find((e=>n.every((n=>void 0!==e[n])))),findByPropsAll:(...n)=>t.findAll((e=>n.every((n=>void 0!==e[n])))),findByPrototypes:(...n)=>t.find((e=>e.prototype&&n.every((n=>void 0!==e.prototype[n])))),findByDisplayName:n=>t.find((e=>e.displayName===n)),findByStringInPropsAll:(...n)=>t.findAll((e=>n.every((n=>1==Object.keys(e).some((e=>e.toLowerCase().includes(n.toLowerCase())))))))};t.find,t.findAll,t.findByProps,t.findByPropsAll,t.findByPrototypes,t.findByDisplayName,t.findByStringInPropsAll;const o={constants:t.findByProps("API_HOST","APP_URL_PREFIX"),channels:t.findByProps("getChannelId","getVoiceChannelId"),Flux:t.findByProps("CachedStore","Store","connectStores"),FluxDispatcher:t.findByProps("_currentDispatchActionType","_subscriptions","_waitQueue"),i18n:t.findByProps("getLanguages","_requestedLocale","languages"),React:t.findByProps("__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","createElement"),ReactDOM:t.findByProps("__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","hydrate")},c=o.React,i=o.ReactDOM;o.Flux;const r=t.findByProps("v4").v4,a={patch:function(n,e,t,o=!1){if("function"!=typeof e[n])throw new Error(`${n} is not a function in ${e.constructor.name}`);e.hasOwnProperty("CUMCORD_INJECTIONS")||(e.CUMCORD_INJECTIONS={});if(!e.CUMCORD_INJECTIONS.hasOwnProperty(n)){const t=r();e.CUMCORD_INJECTIONS[n]=t}const c=e.CUMCORD_INJECTIONS[n];if(!window.cumcord.patcher.patches[c]){const t=Object.assign({},e)[n];window.cumcord.patcher.patches[c]={originalFunction:t,functionParent:e,functionName:n,hooks:{}},e[n]=function(...n){return function(n,e,t){var o,c=!1;const i=window.cumcord.patcher.patches[n].hooks;for(const r in i){const a=i[r];if(a.runInstead)o=a.callback.call(t,e),c=!0;else{c||(o=window.cumcord.patcher.patches[n].originalFunction.call(t,...e),c=!0);let i=a.callback.call(t,e,o);void 0!==i&&(o=i)}}return o}(c,n,this)}}const i=r();return window.cumcord.patcher.patches[c].hooks[i]={runInstead:o,callback:t},()=>l(c,i)},unpatchAll:function(){n("If you're a plugin developer and you ran this because you're curious as to what it does, I highly recommend you refresh your client because unfortunately everything that relies on the patcher has been unpatched.");for(const n in window.cumcord.patcher.patches){const e=window.cumcord.patcher.patches[n].hooks;for(const t in e)l(n,t)}},unpatchAllCss:function(){for(const n of document.querySelectorAll(".CUMCORD_INJECTED_CSS"))n.remove()},patches:{},injectCSS:function(n){const e=document.createElement("style");return e.className="CUMCORD_INJECTED_CSS",e.textContent=n,document.head.appendChild(e),()=>{e.remove()}}};function l(n,e){const t=window.cumcord.patcher.patches[n];if(t){const o=t.hooks;if(o[e])return delete o[e],0==Object.keys(o).length&&(t.functionParent[t.functionName]=t.originalFunction,t.functionParent.CUMCORD_INJECTIONS[t.functionName]=void 0,delete t.functionParent.CUMCORD_INJECTIONS[t.functionName],window.cumcord.patcher.patches[n]=void 0,delete window.cumcord.patcher.patches[n]),!0}return!1}const s=t.findByProps("v4").v4,u={patch:function(n,e,t,o=!1){if("function"!=typeof e[n])throw new Error(`${n} is not a function in ${e.constructor.name}`);e.hasOwnProperty("CUMCORD_INJECTIONS")||(e.CUMCORD_INJECTIONS={});if(!e.CUMCORD_INJECTIONS.hasOwnProperty(n)){const t=s();e.CUMCORD_INJECTIONS[n]=t}const c=e.CUMCORD_INJECTIONS[n];if(!window.cumcord.patcher.patches[c]){const t=Object.assign({},e)[n];window.cumcord.patcher.patches[c]={originalFunction:t,functionParent:e,functionName:n,hooks:{}},e[n]=function(...n){return function(n,e,t){var o,c=!1;const i=window.cumcord.patcher.patches[n].hooks;for(const r in i){const a=i[r];if(a.runInstead)o=a.callback.call(t,e),c=!0;else{c||(o=window.cumcord.patcher.patches[n].originalFunction.call(t,...e),c=!0);let i=a.callback.call(t,e,o);void 0!==i&&(o=i)}}return o}(c,n,this)}}const i=s();return window.cumcord.patcher.patches[c].hooks[i]={runInstead:o,callback:t},()=>d(c,i)},unpatchAll:function(){n("If you're a plugin developer and you ran this because you're curious as to what it does, I highly recommend you refresh your client because unfortunately everything that relies on the patcher has been unpatched.");for(const n in window.cumcord.patcher.patches){const e=window.cumcord.patcher.patches[n].hooks;for(const t in e)d(n,t)}},unpatchAllCss:function(){for(const n of document.querySelectorAll(".CUMCORD_INJECTED_CSS"))n.remove()},patches:{},injectCSS:function(n){const e=document.createElement("style");return e.className="CUMCORD_INJECTED_CSS",e.textContent=n,document.head.appendChild(e),()=>{e.remove()}}};function d(n,e){const t=window.cumcord.patcher.patches[n];if(t){const o=t.hooks;if(o[e])return delete o[e],0==Object.keys(o).length&&(t.functionParent[t.functionName]=t.originalFunction,t.functionParent.CUMCORD_INJECTIONS[t.functionName]=void 0,delete t.functionParent.CUMCORD_INJECTIONS[t.functionName],window.cumcord.patcher.patches[n]=void 0,delete window.cumcord.patcher.patches[n]),!0}return!1}const p=c.useState,m=t.findByDisplayName("Card"),h=t.findByDisplayName("Header"),f=t.findByDisplayName("Text"),g=t.findByDisplayName("Flex"),w=t.findByDisplayName("Markdown"),y=t.findByDisplayName("Switch");t.findByProps("Separator");var C=n=>{const e=window.cumcord.plugins.pluginCache[n.pluginId],[t,o]=p(e.enabled);return c.createElement(m,{className:"cumcord-plugin-card",type:"cardPrimary",outline:!1,editable:!1},c.createElement(g,{justify:g.Justify.BETWEEN,align:g.Align.CENTER},c.createElement("div",{className:"cumcord-card-header"},c.createElement(h,{className:"cumcord-card-title"},e.manifest.name),c.createElement(f,{className:"cumcord-card-author",tag:"h5"}," ","by ",c.createElement("strong",null,e.manifest.author))),c.createElement("div",{className:"cumcord-card-right"},c.createElement("div",{className:"cumcord-card-buttons"},c.createElement("svg",{onClick:()=>{window.cumcord.plugins.removePlugin(n.pluginId),n.updatePlugins()},className:"cumcord-card-delete",xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"},c.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),c.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),c.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}))),c.createElement(y,{checked:t,onChange:()=>{try{window.cumcord.plugins.togglePlugin(n.pluginId),o(e.enabled)}catch{}}}))),c.createElement(w,null,e.manifest.description))};const E=c.useState,N=t.findByDisplayName("FormTitle"),P=t.findByDisplayName("FormSection"),_=t.findByDisplayName("Flex"),v=t.findByDisplayName("TextInput"),I=t.findByProps("Sizes","Colors","Looks","DropdownSizes"),D=t.findByDisplayName("FormDivider");var O=()=>{const[n,e]=E(""),[t,o]=E(Object.keys(window.cumcord.plugins.pluginCache)),i=()=>{o(Object.keys(window.cumcord.plugins.pluginCache))};return c.createElement(P,null,c.createElement(N,{tag:"h1"},"Plugins"),c.createElement(_,{basis:"auto",grow:1,shrink:1},c.createElement(v,{className:"cumcord-plugin-import",placeholder:"https://example.com/plugin",type:"text",value:n,onChange:n=>e(n)}),c.createElement(I,{color:I.Colors.BRAND,size:I.Sizes.MEDIUM,onClick:()=>{e(""),window.cumcord.plugins.importPlugin(n).then((()=>{i()}))}},"Add plugin")),c.createElement(D,{className:"cumcord-plugin-divider"}),t.map((n=>c.createElement(C,{updatePlugins:i,pluginId:n}))))},b=function(){u.injectCSS("\n    .cumcord-plugin-card {\n      padding: 16px;\n      margin-bottom: 10px;\n    }\n\n    .cumcord-plugin-import {\n      flex-grow: 1;\n      margin-right: 20px;\n    }\n\n    .cumcord-plugin-divider {\n      margin-top: 20px;\n      margin-bottom: 20px;\n    }\n\n    .cumcord-card-header {\n      display: inline-block;\n    }\n\n    .cumcord-card-title, .cumcord-card-author {\n      display: inline;\n    }\n\n    .cumcord-card-right {\n      display: flex;\n    }\n\n    .cumcord-card-delete {\n      fill: var(--interactive-normal);\n      cursor: pointer;\n      width: 20px;\n    }\n\n    .cumcord-card-delete:hover {\n      fill: var(--interactive-hover);\n    }\n\n    .cumcord-card-buttons {\n      display: flex;\n      margin-right: 4px;\n    }\n    ");const n=t.findByDisplayName("SettingsView");u.patch("getPredicateSections",n.prototype,((n,e)=>{const t=e.findIndex((n=>"changelog"==n.section))-1;if(t<0)return e;const o=[{section:"DIVIDER"},{section:"HEADER",label:"Cumcord"},{section:"CUMCORD_PLUGINS",label:"Plugins",element:O}];return e.splice(t,0,...o),e}))};const S=t.findByDisplayName("Card"),x=t.findByDisplayName("Header"),B=t.findByDisplayName("Flex");t.findByDisplayName("Text"),t.findByDisplayName("Markdown");var T=n=>c.createElement(S,{className:"cumcord-toast",type:"cardPrimary",outline:!1,editable:!1},c.createElement(B,{justify:B.Justify.BETWEEN,align:B.Align.CENTER},c.createElement("div",{className:"cumcord-toast-header"},c.createElement(x,{className:"cumcord-toast-title"},n.children))));let R=document.createElement("div");var k={initializeToasts:function(){u.injectCSS("\n    .cum-toast {\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      pointer-events: none;\n      display: flex;\n      flex-direction: column-reverse;\n      align-items: flex-end;\n      z-index: 999999;\n    }\n    .cumcord-toast {\n      min-width: 120px;\n      min-height: 50px;\n    }\n    .cumcord-toast-title {\n      font-size: 30px;\n    }\n    "),R.className="cum-toast",document.getElementById("app-mount").prepend(R)},uninitializeToasts:function(){i.unmountComponentAtNode(R),R.remove()},showToast:function(n){i.render(c.createElement(T,null,n),R)}};function A(n){return new Promise(((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)}))}function M(n,e){const t=function(){if(navigator.userAgentData||!/Safari\//.test(navigator.userAgent)||/Chrom(e|ium)\//.test(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let n;return new Promise((e=>{const t=()=>indexedDB.databases().finally(e);n=setInterval(t,100),t()})).finally((()=>clearInterval(n)))}().then((()=>{const t=indexedDB.open(n);return t.onupgradeneeded=()=>t.result.createObjectStore(e),A(t)}));return(n,o)=>t.then((t=>o(t.transaction(e,n).objectStore(e))))}let U;function j(){return U||(U=M("keyval-store","keyval")),U}function J(n,e,t=j()){return t("readwrite",(t=>(t.put(e,n),A(t.transaction))))}const L=eval,z={cache:"no-store"},F="https://cors.bridged.cc/";function $(n){const e=Q.getPlugin(n);if(!e)throw new Error(`Plugin ${n} not found`);if(window.cumcord.plugins.loadedPlugins[n])throw new Error(`Plugin ${n} already loaded`);const t=L(e.js);window.cumcord.plugins.loadedPlugins[n]=t;try{t.onLoad()}catch{}}function H(n){if(!Q.getPlugin(n))throw new Error(`Plugin ${n} not found`);const e=window.cumcord.plugins.loadedPlugins[n];if(!e)throw new Error(`Plugin ${n} not loaded`);e.onUnload(),window.cumcord.plugins.loadedPlugins[n]=void 0,delete window.cumcord.plugins.loadedPlugins[n]}function V(n){const e=Q.getPlugin(n);window.cumcord.plugins.loadedPlugins[n]&&H(n),$(n),e.enabled||(e.enabled=!0,Q.setPlugin(n,e))}function W(n){const e=Q.getPlugin(n);window.cumcord.plugins.loadedPlugins[n]&&H(n),e.enabled&&(e.enabled=!1,Q.setPlugin(n,e))}function q(n){Q.getPlugin(n).enabled?W(n):V(n)}async function Y(n){const e=n.replace(/\/?$/,"/"),t=new URL("plugin.json",e),o=new URL("plugin.js",e);let c=!0;const i=Q.getPlugin(e);let r,a,l,s=!1;try{r=await fetch(t,z)}catch{s=!0,r=await fetch(F+t,z)}if(200!=r.status&&!i)throw new Error("Plugin manifest not returning success");try{a=await r.json()}catch{if(!i)throw new Error("Plugin manifest cannot be parsed")}if(i){if(c=i.enabled,!a)return c&&$(e),void 0;if(i.manifest.hash==a.hash&&(i.manifest!=a&&(i.manifest=a,Q.setPlugin(e,i)),c))return $(e),void 0}if(l=s?await await fetch(F+o,z):await await fetch(o,z),200!=l.status)throw new Error("Plugin not returning success");const u=await l.text();Q.setPlugin(e,{manifest:a,js:u,enabled:c}),c&&$(e)}function G(n){try{H(n)}catch{}window.cumcord.plugins.pluginCache[n]=void 0,delete window.cumcord.plugins.pluginCache[n],J("CumcordCache",window.cumcord.plugins.pluginCache)}var Q={initializePlugins:async()=>{let n=await function(n,e=j()){return e("readonly",(e=>A(e.get(n))))}("CumcordCache");window.cumcord.plugins.loadedPlugins={},n?window.cumcord.plugins.pluginCache=n:(await J("CumcordCache",{}),window.cumcord.plugins.pluginCache={});for(let n of Object.keys(window.cumcord.plugins.pluginCache))Y(n);window.cumcord.plugins.importPlugin=Y,window.cumcord.plugins.removePlugin=G,window.cumcord.plugins.enablePlugin=V,window.cumcord.plugins.disablePlugin=W,window.cumcord.plugins.togglePlugin=q},getPlugin:n=>window.cumcord.plugins.pluginCache[n],setPlugin:(n,e)=>{window.cumcord.plugins.pluginCache[n]=e,J("CumcordCache",window.cumcord.plugins.pluginCache)},removePlugin:G};function X(){for(let n of Object.keys(window.cumcord.plugins.pluginCache))try{H(n)}catch{}return a.unpatchAll(),a.unpatchAllCss(),k.uninitializeToasts(),window.cumcord=void 0,delete window.cumcord,!0}if(window.cumcord)throw new Error("Cumcord is already injected");(async function(){n("Initializing Cumcord API"),window.cumcord={uninject:X,modules:{webpackModules:t,common:o},plugins:{},patcher:a,ui:{showToast:k.showToast},cum:()=>{n("8==D ~~~")}},await Q.initializePlugins(),b(),k.initializeToasts()})()})();